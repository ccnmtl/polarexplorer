{% extends "base.html" %}

{% block title %}
    Calving Glacier
{% endblock %}


{% block content %}
    <div data-role="page">
        <div data-role="header" id="base-header">
            <a href="#about" data-role="button" data-rel="dialog" data-icon="info">About</a>
            <h1 id="header">Calving Glacier</h1>
            <a id="reset" href="#" data-role="button" data-icon="refresh">Reset</a>
        </div>

        <div data-role="content">
            <div class="ui-grid-solo">
                <div class="ui-block-a macroview" style="text-align: center;">
                    Macroview
                </div>
            </div><!-- /grid-b -->
            <div class="ui-grid-solo">
                <div class="ui-block-a microview">                    
                    <div class="glacier glacier_0" data-idx="0">
                        <h5>Image 0</h5>
                    </div>
                </div>
            </div>
        </div>
        
        <div data-role="footer"></div>
    </div>

{% endblock %}

{% block js %}
    <script type="text/javascript">
        jQuery(document).on("pageinit", function (event) {
            jQuery(".glacier").swipeleft(function(event) {
                event.stopImmediatePropagation();
                var imageCount = 7;
                var imgIdx = parseInt(jQuery(this).data("idx"), 10);
                jQuery(this).removeClass("glacier_" + imgIdx);

                imgIdx = (imgIdx + 1) % imageCount;
                jQuery(this).data("idx", imgIdx);
                jQuery(this).addClass("glacier_" + imgIdx);
                jQuery(this).find("h5").html("Image " + imgIdx);
                return false;
            });
            jQuery("#reset").click(function() {
                var imgIdx = jQuery(this).data("idx");
                var elt = jQuery(".glacier")
                jQuery(elt).removeClass("glacier_" + imgIdx);
                
                imgIdx = 0;
                jQuery(elt).data("idx", imgIdx);
                jQuery(elt).addClass("glacier_" + imgIdx);
                jQuery(elt).find("h5").html("Image " + imgIdx);
            });
        });
    </script>
{% endblock %}

