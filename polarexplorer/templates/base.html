{% load compress %}

<!DOCTYPE html>
<html lang="en">
    <head>
    	<meta charset="utf-8" />
    	<title>polarexplorer: {% block title %}{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Polar Explorer">
        <meta name="author" content="CCNMTL">
        
        {% block extrahead %}
        {% endblock %}
        
        <!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
        <meta http-equiv="cleartype" content="on">
        
        <!-- For mobile browsers that do not recognize the viewport tag -->
        <meta name="MobileOptimized" content="320" />
        
        <link rel="stylesheet" href="/site_media/jquery.mobile/jquery.mobile-1.3.2.min.css" media="screen" />
        
        {% compress css %}            
            {% block css %}
                <link href="/site_media/css/main.css" rel="stylesheet">            
            {% endblock %}
        {% endcompress %}
    	
        <link rel="shortcut icon" href="/site_media/img/favicon.ico" type="image/x-icon" />
        
    </head>
    <body>
        {% block content %}
        {% endblock %}
        
        <div id="about" data-role="dialog" data-url="about">
            <div data-role="header">
                <h1>{% block about_title %}About{% endblock %}</h1>
            </div>            
            <div data-role="content">
                {% block about_content %}
                    @todo Credits & Instructions
                {% endblock %}                
            </div>
        </div>
    
        <script src="/site_media/js/jquery-1.8.3.min.js"></script>
        <script src="/site_media/jquery.mobile/jquery.mobile-1.3.2.min.js"></script>
        <script src="/site_media/js/vslider.js"></script>
        
        {% block extrajs %}
        {% endblock %}
        
        {% compress js %}
            <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
            <!--[if lt IE 9]>
                <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
            <![endif]-->
            
            <script type="text/javascript">
                var gOrientation = undefined;
                
                function getOrientationLabel() {                    
                    var rotation = window.hasOwnProperty("orientation") ?
                        window.orientation : 180;
                    
                    return (rotation == 0 || rotation == 180) ?
                            "portrait" : "landscape";
                }
                
                function orientView(orientation) {
                    jQuery("div.macroview").removeClass(gOrientation).addClass(orientation);
                    jQuery("div.microview").removeClass(gOrientation).addClass(orientation);
                    jQuery("div.pageview").removeClass(gOrientation).addClass(orientation);
                    gOrientation = orientation;
                    jQuery(window).trigger("resize");                    
                }
                jQuery(document).on("pageinit", function (event) {                    
                    gOrientation = getOrientationLabel();
                    
                    orientView(gOrientation)
                    
                    jQuery(window).bind("orientationchange", function (e, ui) {
                        orientView(e.orientation);
                    });
                });
            </script>
            {% block js %}{% endblock %}     
        {% endcompress %}
        
        {% if STAGING_ENV %}
            <div class="alert alert-error" style="position: fixed; bottom: 0px;">
            <h4>Warning: Staging Site</h4>
            </div>
        {% endif %}
        
        {% if request.user.is_impersonate %}
            <div class="alert alert-error" style="position: fixed; left: 0px; top: 75px">
            You are impersonating.<br />
            <a class="btn" href="{% url impersonate-stop %}">stop</a>
            </div>
        {% endif %}
    </body>
</html>
